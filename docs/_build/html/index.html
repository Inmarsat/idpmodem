

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to idpmodem’s documentation! &#8212; idpmodem 2.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">idpmodem 2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to idpmodem’s documentation!</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-idpmodem-s-documentation">
<h1>Welcome to idpmodem’s documentation!<a class="headerlink" href="#welcome-to-idpmodem-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="module-idpmodem.atcommand_async">
<span id="atcommand-async"></span><h1>atcommand_async<a class="headerlink" href="#module-idpmodem.atcommand_async" title="Permalink to this headline">¶</a></h1>
<p>AT command protocol (asyncio) for Inmarsat IDP satellite messaging modems.</p>
<p>This module provides an async serial interface that sends and receives
AT commands, decoding/abstracting typically used operations.
Based on the AioSerial package.</p>
<dl class="py exception">
<dt id="idpmodem.atcommand_async.AtCrcConfigError">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_async.</code><code class="sig-name descname">AtCrcConfigError</code><a class="headerlink" href="#idpmodem.atcommand_async.AtCrcConfigError" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a CRC response was received when none expected or vice versa.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_async.AtCrcError">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_async.</code><code class="sig-name descname">AtCrcError</code><a class="headerlink" href="#idpmodem.atcommand_async.AtCrcError" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a detected CRC mismatch on a response.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_async.AtException">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_async.</code><code class="sig-name descname">AtException</code><a class="headerlink" href="#idpmodem.atcommand_async.AtException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for AT command exceptions.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_async.AtTimeout">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_async.</code><code class="sig-name descname">AtTimeout</code><a class="headerlink" href="#idpmodem.atcommand_async.AtTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a timeout waiting for response.</p>
</dd></dl>

<dl class="py class">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient">
<em class="property">class </em><code class="sig-prename descclassname">idpmodem.atcommand_async.</code><code class="sig-name descname">IdpModemAsyncioClient</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'/dev/ttyUSB0'</span></em>, <em class="sig-param"><span class="n">baudrate</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">9600</span></em>, <em class="sig-param"><span class="n">loop</span><span class="p">:</span> <span class="n">asyncio.events.AbstractEventLoop</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">crc</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">debug</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">logger</span><span class="p">:</span> <span class="n">logging.Logger</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log_level</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A satellite IoT messaging modem on Inmarsat’s IsatData Pro service.</p>
<dl class="py attribute">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.crc">
<code class="sig-name descname">crc</code><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.crc" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean used if CRC-16 is enabled for long serial cables</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">at_command</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">retries</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits an AT command and returns the response asynchronously.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>at_command</strong> – The AT command string</p></li>
<li><p><strong>timeout</strong> – The maximum time in seconds to await a response.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of response strings, or [‘ERROR’, ‘&lt;error_code&gt;’]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.config_crc_enable">
<code class="sig-name descname">config_crc_enable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crc</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.config_crc_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables CRC error checking (for long serial cable).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>crc</strong> – enable CRC if true</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.config_report">
<code class="sig-name descname">config_report</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>dict<span class="p">, </span>dict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.config_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;V command to retrive S-register settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple with two dictionaries or both None if failed
at_config with booleans crc, echo, quiet and verbose
reg_config with S-register tags and integer values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.config_restore_factory">
<code class="sig-name descname">config_restore_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.config_restore_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;F command and returns True on success.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.config_restore_nvm">
<code class="sig-name descname">config_restore_nvm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.config_restore_nvm" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the ATZ command to restore from non-volatile memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean success.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.config_save">
<code class="sig-name descname">config_save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.config_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;W command and returns True if successful.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.device_mobile_id">
<code class="sig-name descname">device_mobile_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.device_mobile_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the unique Mobile ID (Inmarsat serial number).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MobileID string or None if error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.device_version">
<code class="sig-name descname">device_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.device_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hardware, firmware and AT versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dict with hardware, firmware, at version or all None if error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.event_get">
<code class="sig-name descname">event_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">raw</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>dict<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.event_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cached event by class/subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> – tuple of (class, subclass)</p></li>
<li><p><strong>raw</strong> – Returns the raw text string if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String if raw=True, dictionary if raw=False or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.event_monitor_get">
<code class="sig-name descname">event_monitor_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.event_monitor_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of monitored/cached events.
As a list of &lt;class.subclass&gt; strings which includes an asterisk
for each new event that can be retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of strings &lt;class.subclass[*]&gt; or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.event_monitor_set">
<code class="sig-name descname">event_monitor_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eventlist</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.event_monitor_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets trace events to monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eventlist</strong> – list of tuples (class, subclass)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successfully set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.gnss_continuous_set">
<code class="sig-name descname">gnss_continuous_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">doppler</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.gnss_continuous_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the GNSS continous mode (0 = on-demand).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval</strong> – Seconds between GNSS refresh.</p></li>
<li><p><strong>doppler</strong> – Often required for moving assets.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successful setting.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.gnss_nmea_get">
<code class="sig-name descname">gnss_nmea_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stale_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">wait_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">35</span></em>, <em class="sig-param"><span class="n">nmea</span><span class="p">:</span> <span class="n">list</span> <span class="o">=</span> <span class="default_value">['RMC', 'GSA', 'GGA', 'GSV']</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>list<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.gnss_nmea_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NMEA-formatted sentences from GNSS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stale_secs</strong> – Maximum age of fix in seconds (1..600)</p></li>
<li><p><strong>wait_secs</strong> – Maximum time to wait for fix (1..600)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of NMEA sentences or ‘ERR_TIMEOUT_OCCURRED’</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError if parameter out of range</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crc</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the modem using ATZ and sets up CRC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>crc</strong> – desired initial CRC enabled if True</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successful</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#idpmodem.atcommand_async.AtException" title="idpmodem.atcommand_async.AtException"><strong>AtException</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.location_get">
<code class="sig-name descname">location_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stale_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">wait_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">35</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.location_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a location object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stale_secs</strong> – the maximum fix age to accept</p></li>
<li><p><strong>wait_secs</strong> – the maximum time to wait for a new fix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nmea.Location object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.lowpower_notification_check">
<code class="sig-name descname">lowpower_notification_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.lowpower_notification_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of relevant events or None.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.lowpower_notifications_enable">
<code class="sig-name descname">lowpower_notifications_enable</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.lowpower_notifications_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up monitoring of satellite status and notification assertion.</p>
<p>The following events trigger assertion of the notification output:
- New Forward Message received
- Return Message completed (success or failure)
- Trace event update (satellite status change)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successful</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_cancel">
<code class="sig-name descname">message_mo_cancel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancels a mobile-originated message in the Tx ready state.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_clear">
<code class="sig-name descname">message_mo_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the modem transmit queue.</p>
<p>TODO: change to generic AT%MRGSC
:returns: Count of messages deleted, or -1 in case of error</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_send">
<code class="sig-name descname">message_mo_send</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">sin</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">min</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">priority</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">4</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_send" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a mobile-originated message to send.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – </p></li>
<li><p><strong>data_format</strong> – </p></li>
<li><p><strong>name</strong> – </p></li>
<li><p><strong>priority</strong> – </p></li>
<li><p><strong>sin</strong> – </p></li>
<li><p><strong>min</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Name of the message if successful, or the error string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_state">
<code class="sig-name descname">message_mo_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mo_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the message state(s) requested.</p>
<p>If no name filter is passed in, all available messages states
are returned.  Returns False is the request failed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The unique message name in the modem queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>UNAVAILABLE, TX_READY, TX_SENDING, TX_COMPLETE, TX_FAILED or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>State</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_delete">
<code class="sig-name descname">message_mt_delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a Return message for deletion by the modem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The unique mobile-terminated name in the queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation succeeded</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_get">
<code class="sig-name descname">message_mt_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">3</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>str<span class="p">, </span>dict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the payload of a specified mobile-terminated message.</p>
<p>Payload is presented as a string with encoding based on data_format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The unique name in the modem queue e.g. FM01.01</p></li>
<li><p><strong>data_format</strong> – text=1, hex=2, base64=3 (default)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The encoded data as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_waiting">
<code class="sig-name descname">message_mt_waiting</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.message_mt_waiting" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of received mobile-terminated message information.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of (name, number, priority, sin, state, length, received)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.notification_check">
<code class="sig-name descname">notification_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; collections.OrderedDict<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.notification_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current active event notification bitmask.
Clears the value of S89 upon reading.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.notification_control_get">
<code class="sig-name descname">notification_control_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>collections.OrderedDict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.notification_control_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current notification configuration bitmask.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.notification_control_set">
<code class="sig-name descname">notification_control_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_map</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.notification_control_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the event notification bitmask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_map</strong> – list of dict{event_name, bool}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successful.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.s_register_get">
<code class="sig-name descname">s_register_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">register</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>int<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.s_register_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the S-register requested.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>register</strong> – The register name/number (e.g. S80)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer value or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.sat_status_name">
<em class="property">static </em><code class="sig-name descname">sat_status_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">ctrl_state</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.sat_status_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns human-readable definition of a control state value.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError if ctrl_state is not found.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.sat_status_snr">
<code class="sig-name descname">sat_status_snr</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>float<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.sat_status_snr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the control state and C/No.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>int, C/No: float) or None if error.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple with (state</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.shutdown">
<code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the modem to prepare for power-down.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.sreg_get_all">
<code class="sig-name descname">sreg_get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.sreg_get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of S-register definitions.
R=read-only, S=signed, V=volatile</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple(register, RSV, current, default, minimum, maximum) or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_async.IdpModemAsyncioClient.utc_time">
<code class="sig-name descname">utc_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_async.IdpModemAsyncioClient.utc_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns current UTC time of the modem in ISO format.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-idpmodem.nmea">
<span id="nmea"></span><h1>nmea<a class="headerlink" href="#module-idpmodem.nmea" title="Permalink to this headline">¶</a></h1>
<p>Utilities for parsing NMEA data into a location object</p>
<dl class="py class">
<dt id="idpmodem.nmea.Location">
<em class="property">class </em><code class="sig-prename descclassname">idpmodem.nmea.</code><code class="sig-name descname">Location</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">latitude</span><span class="o">=</span><span class="default_value">90.0</span></em>, <em class="sig-param"><span class="n">longitude</span><span class="o">=</span><span class="default_value">180.0</span></em>, <em class="sig-param"><span class="n">altitude</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">speed</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">heading</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">satellites</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">fix_type</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.nmea.Location" title="Permalink to this definition">¶</a></dt>
<dd><p>A class containing a specific set of location-based information for a given point in time.
Uses 90.0/180.0 if latitude/longitude are unknown</p>
<dl class="simple">
<dt>..todo::</dt><dd><p>Implement logging</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latitude</strong> – decimal degrees</p></li>
<li><p><strong>longitude</strong> – decimal degrees</p></li>
<li><p><strong>altitude</strong> – in metres</p></li>
<li><p><strong>speed</strong> – in knots</p></li>
<li><p><strong>heading</strong> – in degrees</p></li>
<li><p><strong>timestamp</strong> – in seconds since 1970-01-01T00:00:00Z</p></li>
<li><p><strong>satellites</strong> – in view at time of fix</p></li>
<li><p><strong>fix_type</strong> – 1=None, 2=2D or 3=3D</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.nmea.NmeaException">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.nmea.</code><code class="sig-name descname">NmeaException</code><a class="headerlink" href="#idpmodem.nmea.NmeaException" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="idpmodem.nmea.validate_nmea_checksum">
<code class="sig-prename descclassname">idpmodem.nmea.</code><code class="sig-name descname">validate_nmea_checksum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sentence</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.nmea.validate_nmea_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates NMEA sentence using checksum according to the standard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentence</strong> – NMEA sentence including checksum</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Boolean result (checksum correct)</p></li>
<li><p>raw NMEA data string, with prefix $Gx and checksum suffix removed</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-idpmodem.atcommand_thread">
<span id="atcommand-thread"></span><h1>atcommand_thread<a class="headerlink" href="#module-idpmodem.atcommand_thread" title="Permalink to this headline">¶</a></h1>
<p>AT command protocol (threaded) for Inmarsat IDP satellite messaging modems.</p>
<p>This module provides a threaded serial interface that sends and receives
AT commands, decoding/abstracting typically used operations.
Based on the PySerial threaded protocol factory, using a byte reader.</p>
<dl class="py exception">
<dt id="idpmodem.atcommand_thread.AtCrcConfigError">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtCrcConfigError</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtCrcConfigError" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a CRC response was received when none expected or vice versa.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_thread.AtCrcError">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtCrcError</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtCrcError" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a detected CRC mismatch on a response.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_thread.AtException">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtException</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for AT command exceptions.</p>
</dd></dl>

<dl class="py class">
<dt id="idpmodem.atcommand_thread.AtProtocol">
<em class="property">class </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtProtocol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crc</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">unsolicited_callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default_at_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Threaded protocol factory for the IDP Modem.</p>
<p>Accepts only one AT command at a time.  Handles command echo
terminated with &lt;cr&gt;, verbose response framed with &lt;cr&gt;&lt;lf&gt;,
unsolicited data terminated with &lt;lf&gt;, and CRC error checking.</p>
<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.alive">
<code class="sig-name descname">alive</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.alive" title="Permalink to this definition">¶</a></dt>
<dd><p>True while the factory is running.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.crc">
<code class="sig-name descname">crc</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.crc" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if CRC error checking is enabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.pending_command">
<code class="sig-name descname">pending_command</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.pending_command" title="Permalink to this definition">¶</a></dt>
<dd><p>The AT command being processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.responses">
<code class="sig-name descname">responses</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Queued responses to be processed as a line.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Queue</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.unsolicited">
<code class="sig-name descname">unsolicited</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.unsolicited" title="Permalink to this definition">¶</a></dt>
<dd><p>Unexpected data received if no pending command.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Queue</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="idpmodem.atcommand_thread.AtProtocol.unsolicited_callback">
<code class="sig-name descname">unsolicited_callback</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.unsolicited_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>optional callback function for</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt>
<code class="sig-name descname">unexpected data</code></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param">command: str</em>, <em class="sig-param">timeout: int = 5) -&gt; (&lt;class 'list'&gt;</em>, <em class="sig-param">&lt;class 'int'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Send an AT command and wait for the response.</p>
<p>Returns the response as a list.  If an error response code was
received then ‘ERROR’ will be the only string in the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> – The AT command</p></li>
<li><p><strong>timeout</strong> – Time to wait for response in seconds (default 5)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The response as a list of strings
Command latency in seconds</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AtCrcError if CRC does not match.</strong> – </p></li>
<li><p><strong>AtCrcConfigError if CRC was returned unexpectedly.</strong> – </p></li>
<li><p><strong>AtTimeout if the request timed out.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.data_received">
<code class="sig-name descname">data_received</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">bytearray</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.data_received" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffer received data and create packets for handlers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – a data byte received from the serial device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.handle_line">
<code class="sig-name descname">handle_line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.handle_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Enqueues lines for parsing by command handler.</p>
<p>Overrides LineReader class method to distinguish unsolicited
from expected responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> – The unicode string received from the serial port.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.handle_packet">
<code class="sig-name descname">handle_packet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">packet</span><span class="p">:</span> <span class="n">bytearray</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.handle_packet" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the buffer to unicode for parser handling.</p>
<p>Duplicates LineReader method for clarity in this code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>packet</strong> – Raw binary data buffer from the serial port.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.handle_unsolicited">
<code class="sig-name descname">handle_unsolicited</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unsolicited</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.handle_unsolicited" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls a user-defined function with the unicode string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unsolicited</strong> – A unicode string terminated by &lt;lf&gt;.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.AtProtocol.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.AtProtocol.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the data processing thread.</p>
<p>Aborts pending commands, if any.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_thread.AtTimeout">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtTimeout</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a timeout waiting for response.</p>
</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_thread.AtUnsolicited">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">AtUnsolicited</code><a class="headerlink" href="#idpmodem.atcommand_thread.AtUnsolicited" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates unsolicited data was received from the modem.</p>
</dd></dl>

<dl class="py class">
<dt id="idpmodem.atcommand_thread.ByteReaderThread">
<em class="property">class </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">ByteReaderThread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">serial_instance</span></em>, <em class="sig-param"><span class="n">protocol_factory</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.ByteReaderThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the ReaderThread class to process bytes individually.</p>
<p>This is required due to complexities of optional checksum use
for long serial lines.</p>
<dl class="py method">
<dt id="idpmodem.atcommand_thread.ByteReaderThread.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.ByteReaderThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader loop</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="idpmodem.atcommand_thread.IdpModem">
<em class="property">class </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">IdpModem</code><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem" title="Permalink to this definition">¶</a></dt>
<dd><p>A protocol factory abstracting AT commands for an IDP modem.</p>
<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">busy_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">30</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the super class function to add metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>) – The AT command</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The command timeout (default 5 seconds)</p></li>
<li><p><strong>busy_timeout</strong> (<em>int</em>) – Timeout (seconds) for next waiting command</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.config_nvm_report">
<code class="sig-name descname">config_nvm_report</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>dict<span class="p">, </span>dict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.config_nvm_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;V command to retrive S-register settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple with two dictionaries or both None if failed
at_config with booleans crc, echo, quiet and verbose
reg_config with S-register tags and integer values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.config_nvm_save">
<code class="sig-name descname">config_nvm_save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.config_nvm_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;W command and returns result.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.config_restore_factory">
<code class="sig-name descname">config_restore_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.config_restore_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT&amp;F command and returns True on success.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.config_restore_nvm">
<code class="sig-name descname">config_restore_nvm</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.config_restore_nvm" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the ATZ command to restore from non-volatile memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean success.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.config_volatile_report">
<code class="sig-name descname">config_volatile_report</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>dict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.config_volatile_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns key S-register settings.</p>
<p>GNSS Mode (S39), GNSS fix timeout (S41), GNSS Continuous (S55),
GNSS Jamming Status (S56), GNSS Jamming Indicator (S57),
Low power Wakeup Period (S51)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dictionary of S-register values, or None if failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.connection_lost">
<code class="sig-name descname">connection_lost</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.connection_lost" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an exception on disconnect.
TODO: not tested
May be overridden by user subclass.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.connection_made">
<code class="sig-name descname">connection_made</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.connection_made" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the input buffer on connect.
TODO: not tested
May be overridden by user subclass.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.crc_enable">
<code class="sig-name descname">crc_enable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">enable</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.crc_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the AT%CRC command and returns success flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>enable</strong> – turn on CRC if True else turn off</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation succeeded else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.device_mobile_id">
<code class="sig-name descname">device_mobile_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.device_mobile_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the unique Mobile ID (Inmarsat serial number).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MobileID string or None if error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.device_version">
<code class="sig-name descname">device_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.device_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hardware, firmware and AT versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dict with hardware, firmware, at version or all None if error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.error_detail">
<code class="sig-name descname">error_detail</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.error_detail" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the last error code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Reason description string or None if error on error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.event_get">
<code class="sig-name descname">event_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">raw</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>dict<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.event_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cached event by class/subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> – tuple of (class, subclass)</p></li>
<li><p><strong>raw</strong> – Returns the raw text string if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String if raw=True, dictionary if raw=False or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.event_monitor_get">
<code class="sig-name descname">event_monitor_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.event_monitor_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of monitored/cached events.
As a list of &lt;class.subclass&gt; strings which includes an asterisk
for each new event that can be retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of strings &lt;class.subclass[*]&gt; or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.event_monitor_set">
<code class="sig-name descname">event_monitor_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eventlist</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.event_monitor_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets trace events to monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eventlist</strong> – list of tuples (class, subclass)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successfully set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.gnss_continuous_set">
<code class="sig-name descname">gnss_continuous_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">doppler</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.gnss_continuous_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the GNSS continous mode (0 = on-demand).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval</strong> – Seconds between GNSS refresh.</p></li>
<li><p><strong>doppler</strong> – Often required for moving assets.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successful setting.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.gnss_nmea_get">
<code class="sig-name descname">gnss_nmea_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stale_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">wait_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">35</span></em>, <em class="sig-param"><span class="n">nmea</span><span class="p">:</span> <span class="n">list</span> <span class="o">=</span> <span class="default_value">['RMC', 'GSA', 'GGA', 'GSV']</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>list<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.gnss_nmea_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of NMEA-formatted sentences from GNSS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stale_secs</strong> – Maximum age of fix in seconds (1..600)</p></li>
<li><p><strong>wait_secs</strong> – Maximum time to wait for fix (1..600)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of NMEA sentences or ‘ERR_TIMEOUT_OCCURRED’</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError if parameter out of range</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.location_get">
<code class="sig-name descname">location_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stale_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">wait_secs</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">35</span></em><span class="sig-paren">)</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.location_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a location object</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mo_cancel">
<code class="sig-name descname">message_mo_cancel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mo_cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancels a mobile-originated message in the Tx ready state.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mo_clear">
<code class="sig-name descname">message_mo_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mo_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the modem transmit queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Count of messages deleted, or -1 in case of error</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mo_send">
<code class="sig-name descname">message_mo_send</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">3</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">priority</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">4</span></em>, <em class="sig-param"><span class="n">sin</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mo_send" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a mobile-originated message to send.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – </p></li>
<li><p><strong>data_format</strong> – </p></li>
<li><p><strong>name</strong> – </p></li>
<li><p><strong>priority</strong> – </p></li>
<li><p><strong>sin</strong> – </p></li>
<li><p><strong>min</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Name of the message if successful, or the error string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mo_state">
<code class="sig-name descname">message_mo_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mo_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the message state(s) requested.</p>
<p>If no name filter is passed in, all available messages states
are returned.  Returns False is the request failed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The unique message name in the modem queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>UNAVAILABLE, TX_READY, TX_SENDING, TX_COMPLETE, TX_FAILED or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>State</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mt_delete">
<code class="sig-name descname">message_mt_delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mt_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a Return message for deletion by the modem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The unique mobile-terminated name in the queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation succeeded</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mt_get">
<code class="sig-name descname">message_mt_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">3</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>str<span class="p">, </span>dict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mt_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the payload of a specified mobile-terminated message.</p>
<p>Payload is presented as a string with encoding based on data_format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The unique name in the modem queue e.g. FM01.01</p></li>
<li><p><strong>data_format</strong> – text=1, hex=2, base64=3 (default)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The encoded data as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.message_mt_waiting">
<code class="sig-name descname">message_mt_waiting</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.message_mt_waiting" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of received mobile-terminated message information.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of (name, number, priority, sin, state, length, received)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.notification_check">
<code class="sig-name descname">notification_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; collections.OrderedDict<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.notification_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current active event notification bitmask.
Clears the value of S89 upon reading.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.notification_control_get">
<code class="sig-name descname">notification_control_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>collections.OrderedDict<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.notification_control_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current notification configuration bitmask.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.notification_control_set">
<code class="sig-name descname">notification_control_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_map</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.notification_control_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the event notification bitmask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_map</strong> – list of dict{event_name, bool}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successful.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.raw_command">
<code class="sig-name descname">raw_command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'AT'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.raw_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a command and returns a list of responses and response code.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.s_register_get">
<code class="sig-name descname">s_register_get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">register</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>int<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.s_register_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the S-register requested.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>register</strong> – The register name/number (e.g. S80)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer value or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.sat_status_name">
<code class="sig-name descname">sat_status_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ctrl_state</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.sat_status_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns human-readable definition of a control state value.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError if ctrl_state is not found.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.sat_status_snr">
<code class="sig-name descname">sat_status_snr</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>float<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.sat_status_snr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the control state and C/No.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>int, C/No: float) or None if error.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple with (state</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.shutdown">
<code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the modem to prepare for power-down.</p>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.sreg_get_all">
<code class="sig-name descname">sreg_get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>list<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.sreg_get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of S-register definitions.
R=read-only, S=signed, V=volatile</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple(register, RSV, current, default, minimum, maximum) or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="idpmodem.atcommand_thread.IdpModem.utc_time">
<code class="sig-name descname">utc_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModem.utc_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns current UTC time of the modem in ISO format.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="idpmodem.atcommand_thread.IdpModemBusy">
<em class="property">exception </em><code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">IdpModemBusy</code><a class="headerlink" href="#idpmodem.atcommand_thread.IdpModemBusy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="idpmodem.atcommand_thread.get_modem_thread">
<code class="sig-prename descclassname">idpmodem.atcommand_thread.</code><code class="sig-name descname">get_modem_thread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'/dev/ttyUSB0'</span></em>, <em class="sig-param"><span class="n">baudrate</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">9600</span></em><span class="sig-paren">)</span> &#x2192; tuple<a class="headerlink" href="#idpmodem.atcommand_thread.get_modem_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a threaded IDP modem connection / protocol factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> – The serial port name (default /dev/ttyUSB0)</p></li>
<li><p><strong>baudrate</strong> – The serial baud rate (default 9600)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(IdpModem, Thread)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-examples.st2100_demo">
<span id="st2100-demo"></span><h1>ST2100 demo<a class="headerlink" href="#module-examples.st2100_demo" title="Permalink to this headline">¶</a></h1>
<p>Periodically queries modem status and writes to a log file</p>
<dl class="py function">
<dt id="examples.st2100_demo.complete_mo_messages">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">complete_mo_messages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.complete_mo_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks return message status in the queue to avoid queue filling.</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.get_network_state">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">get_network_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.get_network_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the network state</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.get_stats">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">get_stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.get_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Requests relevant beta trial statistics.</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.handle_mt_messages">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">handle_mt_messages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.handle_mt_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes Mobile-Terminated messages with SIN 255.</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.log_stat">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">log_stat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stat_label</span></em>, <em class="sig-param"><span class="n">stat</span></em>, <em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.log_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs the requested statistics.</p>
<p>EVNT responses have the format:
&lt;dataCount&gt;,&lt;signedBitmask&gt;,&lt;MTID&gt;,&lt;timestamp&gt;,&lt;class&gt;,&lt;subclass&gt;,
&lt;priority&gt;,&lt;data0&gt;,&lt;data1&gt;,…,&lt;dataN&gt;</p>
<p>Up to 24 x 32-bit values supported, only dataCount are populated.
Timestamp is referenced to 2001-01-01T00:00:00Z</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.parse_args">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argv</span></em><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the command line arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – An array containing the command line arguments</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing the command line arguments and their values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.send_idp_location">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">send_idp_location</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.send_idp_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a binary-optimized location report using SIN=255, MIN=255.</p>
</dd></dl>

<dl class="py function">
<dt id="examples.st2100_demo.update_tracking_interval">
<code class="sig-prename descclassname">examples.st2100_demo.</code><code class="sig-name descname">update_tracking_interval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interval_minutes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#examples.st2100_demo.update_tracking_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>A remote command reconfigures the tracking interval.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interval_minutes</strong> – The new interval in minutes</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to idpmodem’s documentation!</a></li>
<li><a class="reference internal" href="#module-idpmodem.atcommand_async">atcommand_async</a></li>
<li><a class="reference internal" href="#module-idpmodem.nmea">nmea</a></li>
<li><a class="reference internal" href="#module-idpmodem.atcommand_thread">atcommand_thread</a></li>
<li><a class="reference internal" href="#module-examples.st2100_demo">ST2100 demo</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">idpmodem 2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to idpmodem’s documentation!</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, G.Bruce-Payne.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.0.
    </div>
  </body>
</html>